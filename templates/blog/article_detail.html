{% extends "main/layout.html" %}
{% load staticfiles %}
{% load blogs_info %}
{% load cache %}
{% block meta %}
    <title>{{ article.title }} | {{ SITE_DESCRIPTION }}</title>
    <meta property="og:type" content="article"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:title" content="{{ article.title }}"/>
    <meta name="robots" content="index, follow">
    <meta property="og:description" content="{{ article.body|custom_markdown|striptags|truncatewords:20 }}"/>
    <meta property="og:url"
          content="{{ article.get_full_url }}"/>
    <meta property="article:published_time" content="{% datetimeformat article.pub_time %}"/>
    <meta property="article:modified_time" content="{% datetimeformat article.pub_time %}"/>
    <meta property="article:author" content="{{ article.author.get_full_url }}"/>
    <meta property="article:section" content="{{ article.category.name }}"/>
    {% for t in article.tags.all %}
        <meta property="article:tag" content="{{ t.name }}"/>
    {% endfor %}
    <meta property="og:site_name" content="{{ SITE_NAME }}"/>

    <meta name="description" content="{{ article.body|custom_markdown|striptags|truncatewords:20 }}"/>
    {% if article.tags %}
        <meta name="keywords" content="{{ article.tags.all|join:"," }}"/>
    {% else %}
        <meta name="keywords" content="{{ SITE_KEYWORDS }}"/>
    {% endif %}
    {% markdown_images article.body as imgs %}
    {% if imgs %}
        <meta property="og:image" content="{{ imgs.0 }}" />
    {% endif %}
    <meta property="og:image:alt" content="{{ article.title }}" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="{{ SITE_NAME }}">
    <meta name="twitter:title" content="{{ article.title }}">
    <meta name="twitter:description" content="{{ article.body|custom_markdown|striptags|truncatewords:8 }}">
    <meta name="twitter:creator" content="{{ SITE_NAME }}">
    {% if imgs %}
        <meta name="twitter:image:src" content="{{ imgs.0 }}">
    {% endif %}
    <meta name="twitter:image:alt" content="{{ article.title }}" />
    <meta name="twitter:domain" content="www.agrowdev.com">
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
<script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>
{% endblock %}
{% block compress_css %}
<style>
 .box {
	 margin: auto;
	 width: 100px;
	 height: 50px;
}
 .share {
	 position: fixed;
	 width: 99px;
	 height: 45px;
	 border-radius: 0px;
	 outline: none;
	 border: 0;
     top: 250px;
     left: -32px;
	 background: #2a4870;
	 overflow: hidden;
	 transition: all 0.5s ease;
	 box-shadow: 3px 5px 10px rgba(42, 72, 112, .5);
     transform: rotate(90deg);
     z-index: 1;
}

/* Small devices (portrait tablets and large phones, 600px and up) */

 .scale {
     transform : rotate(90deg) scale(1.1);
	 transition: all 0.5s ease;
}
 .line, .line2, .line3 {
	 width: 13px;
	 height: 60px;
	 position: absolute;
	 transform: rotate(15deg);
}
 .line {
	 right: 22px;
	 top: -5px;
	 background: #9ece92;
}
 .line2 {
	 right: 10px;
	 background: #33a8cc;
}
 .line3 {
	 right: -3px;
	 background: #1e73b5;
}
 .icon {
	 user-select: none;
	 position: absolute;
	 color: #d0d8db;
	 left: 16px;
    top: 14px;

}
 .icon .head {
	 font-family: 'Open Sans', sans-serif;
	 text-transform: uppercase;
	 letter-spacing: 5px;
	 font-size: 0.9em;
}
 .icon .btn {
	 position: absolute;
	 right: -19px;
	 background: rgba(208, 216, 219, .9);
	 color: #2a4870;
	 top: 6px;
    padding: 7px 5px;
    border-radius: 50%;
}
 .active {
	 z-index: 1;
     top: 150px;
	 left: 0px;
	 position: fixed;
	 opacity: 0;
     transform: rotate(90deg);
	 transition: all 0.7s ease;
}
 .active li {
	 list-style-type: none;
	 width: 40px;
	 height: 40px;
	 color: #d0d8db;
	 border-radius: 50%;
	 position: absolute;
	 box-shadow: 2px 2px 6px rgba(42, 72, 112, .5);
     transform: rotate(-90deg);
}
 .active i {
	 margin: 10px 10px 8px 6px;
}
 .open {
	position: fixed;
    left: 100px;
    top: 150px;
    opacity: 1;
    transform: rotate(90deg);
}
 .fab {
	 padding-left: 5px;
}
.fa {
	 padding-left: 5px;
}
 .one {
     background: #0e76a8;
	 left: 0;
}
 .two {
     background: #3b5998;
	 left: 50px;
}
 .three {
     background: #00acee;
	 left: 100px;
}
 .four {
     background: #7d7d7d;
	 left: 150px;
}
 .five {
     background:  #DB4A2A;
	 left: 200px;
}
 #hide {
	 visibility: hidden;
}
 @media only screen and (max-width: 600px) {
   .share {
	 width: 80px;
	 height: 43px;
    } 
    .icon .head {
        letter-spacing: 2px;
        font-size: 0.7em;
    }
    .icon {
        
        left: 10px;
        top: 1px;
    }
    .open {
        left: 70px;
    }
    .active i {
        margin-left: 2px;
        margin-top: 8px;
    }
    .active li {
        width: 30px;
        height: 30px;
    }
    .five {
        left: 185px;
    }
    .four {
        left: 144px;
    }
    .three {
        left: 100px;
    }
    .two {
        left: 58px;
    }
    .one {
        left: 11px;
    }
}
@media only screen and (min-width: 600px) {
	 .share {
	 width: 90px;
	 height: 45px;
    } 
    .icon .head {
        letter-spacing: 2px;
        font-size: 0.8em;
    }
    
    .icon {
        top: 6px;
    }
    .open {
        left: 95px;
    }
    .active li {
        width: 35px;
        height: 35px;
    }
}

/* Medium devices (landscape tablets, 768px and up) */
@media only screen and (min-width: 768px) {
    .share {
	 width: 95px;
	 height: 45px;
    } 
    .icon .head {
        letter-spacing: 2px;
        font-size: 0.8em;
    }
    
    .icon {
        top: 9px;
    }
    
}

</style>
<link rel="stylesheet" href="{% static 'app/css/blog-styles.css' %}">
{% endblock %}
{% block content %}
{% include 'blog/tags/clap_btn.html' %}
<div class="services-area">
        <div class="container">
            <div class="row d-flex justify-content-center">
                <div class="col-lg-8">
                    <div class="job-page-tittle text-center mb-80">
                        <h2 class="heading">{{article.title}}
                        </h2>
                    </div>
                </div>
                <div class="col-lg-4 blog_right_sidebar">
                    {% include 'blog/tags/search.html' %}
                </div>
            </div>
        </div>
    </div>
        <!-- ***** Blog Details Area Start ***** -->
    <section class="blog_area single-post-area">
        <div class="container">
            <div class="row ">
                <div class="col-lg-8 posts-list">
                    <div class="page-container">
                        {% load_article_detail_info article True user %}
                    </div>
                    <div class="navigation-top">
                        <div class="d-sm-flex justify-content-between text-center">
                            <div class="col-sm-4 text-center my-2 my-sm-0">
                                <p class="like-info mr-5" ><span class="align-middle"></span></p>
                            </div>
                            <div class="col-sm-4 text-center my-2 my-sm-0">
                            
                            {% get_comment_count article as count%}
                                <p class="comment-count"><span class="align-middle"><i class="fa fa-comment"></i></span>{{count}}  Comments</p>
                            </div>
                            <ul class="social-icons">
                                <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                                <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                                <li><a href="#"><i class="fab fa-dribbble"></i></a></li>
                                <li><a href="#"><i class="fab fa-behance"></i></a></li>
                            </ul>
                        </div>
                        {% if article.type == 'a' %}
                            <div class="navigation-area">
                                <div class="row">
                                {% if next_article %}
                                    <div class="col-lg-6 col-md-6 col-12 nav-left flex-row d-flex justify-content-start align-items-center">
                                    <div class="thumb">
                                        <a href="{{ next_article.get_absolute_url }}">
                                            <img class="img-fluid" src="{% static 'app/img/post/preview.png' %}" alt="">
                                        </a>
                                    </div>
                                    <div class="arrow">
                                        <a href="{{ next_article.get_absolute_url }}">
                                            <span class="lnr text-white ti-arrow-left"></span>
                                        </a>
                                    </div>
                                    <div class="detials">
                                        <p>Prev Post</p>
                                        <a href="{{ next_article.get_absolute_url }}">
                                            <h4>{{ next_article.title }}</h4>
                                        </a>
                                    </div>
                                    </div>
                                {% endif %}
                                {% if prev_article %}
                                    <div class="col-lg-6 col-md-6 col-12 nav-right flex-row d-flex justify-content-end align-items-center">
                                    <div class="detials">
                                        <p>Next Post</p>
                                        <a href="{{ prev_article.get_absolute_url }}">
                                            <h4>{{ prev_article.title }}</h4>
                                        </a>
                                    </div>
                                    <div class="arrow">
                                        <a href="{{ prev_article.get_absolute_url }}">
                                            <span class="lnr text-white ti-arrow-right"></span>
                                        </a>
                                    </div>
                                    <div class="thumb">
                                        <a href="{{ prev_article.get_absolute_url }}">
                                            <img class="img-fluid" src="{% static 'app/img/post/next.png' %}" alt="">
                                        </a>
                                    </div>
                                    </div>
                                {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                    
                    
                    {% load_comments_list article  %}
                    <div class="comment-form">
                        <h2 class="mb-4">Leave A Comment</h2>
                        {% if user.is_authenticated %}
                        <form id = "comment_form" action="{% url 'comment:update_comment' %}" class="form-contact comment_form" method="POST">

                            <div id="reply_content_container" style="display:none;">
                                <p id="reply_title">Reply：</p>
                                <div id="reply_content"></div>
                            </div>

                            {% csrf_token %}
                            {% get_comment_form article as comment_form%}
                            {% for field in comment_form %}
                                {{ field }}
                            {% endfor %}

                            <span id="comment_error" class="text-danger pull-left"></span>
                            <div class="form-group">
                                <button type="submit" class="button button-contactForm btn_1 boxed-btn" value="comment">Comment</button>
                            </div>
                        </form>
                        {% else %}
                            Please login and comment
                            <a class = "btn btn-primary" href="{% url 'accounts:login' %}?from={{ request.get_full_path }}">log in</a>
                            <span> or </span>
                        {% endif %}
                                        
                </div>
                    
                </div>
                <div class="col-lg-4">
                    <div class="blog_right_sidebar">
                            {% block sidebar %}
                                {% with request.user.username as cachekey %}
                                    {% cache 36000 asidebar cachekey %}
                                        {% load_sidebar user linktype %}
                                    {% endcache %}
                                {% endwith %}
                            {% endblock %}
                        </div>
                    </div>
            </div>
        </div>
    </section>
    <!-- ***** Blog Details Area End ***** -->


{% endblock content %}

{% block script_extends %}

    <script type="text/javascript">
            function reply(reply_comment_id){
            // 设置值
            $('#reply_comment_id').val(reply_comment_id);
            var html = $("#comment_" + reply_comment_id).html();
            $('#reply_content').html(html);
            $('#reply_content_container').show();
            $('html').animate({scrollTop: $('#comment_form').offset().top - 60}, 300, function(){
                CKEDITOR.instances['id_text'].focus();
            });
        }

        $("#comment_form").submit(function(){
            $("#comment_error").text('');
            if(CKEDITOR.instances['id_text'].document.getBody().getText().trim() === ''){
                $("#comment_error").text('Comment content cannot be empty');
                return false;``
            }
        });
        $('.box').on('click', function(){
            $(".share").toggleClass('scale');
            $('div#hide').removeAttr('id');
            $('.active').toggleClass('open');
        });
        
        
        $('.share-facebook').on('click', function(){
            window.open("https://www.facebook.com/sharer/sharer.php?u=https://{{ request.get_host }}{{ article.get_absolute_url }}/", "");
        });
        $('.share-linkedin').on('click', function(){
            window.open("https://www.linkedin.com/sharing/share-offsite/?url=https://{{ request.get_host }}{{ article.get_absolute_url }}/", "");
        });
        $('.share-twitter').on('click', function(){
            window.open("https://twitter.com/share?text={{ article.title }}&url=https://{{ request.get_host }}/{{ article.get_absolute_url }}/", "");
        });
        $('.share-email').on('click', function(){
            window.open("https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su={{ article.title }}&body=+https:\/\/{{ request.get_host }}{{ article.get_absolute_url }}\/+&ui=2&tf=1&pli=1");
        });
        $('.share-pinterest').on('click', function(){
            window.open("http://pinterest.com/pin/create/button/?url=https://{{ request.get_host }}/{{ article.get_absolute_url }}/&description={{article.title}}", "");
        });
    </script>
{% endblock %}


